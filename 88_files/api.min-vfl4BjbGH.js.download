define(["require","exports","modules/clean/ajax_as_promised","modules/clean/ajax_util"],function(e,n,r,i){"use strict";function t(e){return{is_dir:e.is_dir,filename:e.filename,sort_key:e.sort_key,href:e.href,bytes:e.bytes,direct_blockserver_link:e.direct_blockserver_link,ns_id:e.ns_id,preview_type:e.preview_type,preview_url:e.preview_url,sjid:e.sjid,ts:e.ts,thumbnail_url_tmpl:e.thumbnail_url_tmpl,beacon_context:e.beacon_context,file_id:e.file_id,doc_preview_status:e.doc_preview_status,video_transcode_url:e.video_transcode_url,video_metadata_url:e.video_metadata_url,htmlified_link:e.htmlified_link,linkfile_data:e.linkfile_data,revision_id:e.revision_id}}function o(e){return{is_dir:e.is_dir,filename:e.filename,sort_key:e.sort_key,href:e.href,shared_folder_id:e.shared_folder_id,open_in_app_data:e.open_in_app_data}}function s(e){return{url:e.url,downloadTestUrl:e.downloadTestUrl,ownerName:e.ownerName,ownerTeamName:e.ownerTeamName,ownerTeamLogo:e.ownerTeamLogo}}function a(e){return{canCopyToDropboxRoles:e.canCopyToDropboxRoles,canDownloadRoles:e.canDownloadRoles,canPrintRoles:e.canPrintRoles,canRemoveLinkUids:e.canRemoveLinkUids,canSyncToDropboxRoles:e.canSyncToDropboxRoles,canViewContextMenuRoles:e.canViewContextMenuRoles}}function _(e){return{displayName:e.displayName,isPackage:e.isPackage,itemId:e.itemId,linkKey:e.linkKey,linkType:e.linkType,secureHash:e.secureHash,subPath:e.subPath}}function l(e){for(var n=[],r=0,i=e.entries;r<i.length;r++){var l=i[r];l.is_dir?n.push(o(l)):n.push(t(l))}return{entries:n,sharedLinkInfos:e.shared_link_infos.map(s),sharePermissions:e.share_permissions.map(a),shareTokens:e.share_tokens.map(_),hasMoreEntries:e.has_more_entries,nextRequestVoucher:e.next_request_voucher,takedownRequestType:e.takedown_request_type}}function u(e,n){return new Promise(function(t){var o={};o.link_key=e.linkKey,o.secure_hash=e.secureHash,o.sub_path=e.subPath,n&&(o.voucher=n),i.requestWithRetry(function(){return r.WebRequest({type:"POST",url:"/list_shared_link_folder_entries",data:o,dataType:"json"})}).then(function(e){t(l(e))})})}function d(e){return u(e)}function c(e,n){return u(e,n)}n.fetchFirstPage=d,n.fetchNextPage=c});
//# sourceMappingURL=api.min.js-vflCfi0Xz.map